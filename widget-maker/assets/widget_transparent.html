<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Value Display</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        background: transparent;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
        /* Enable dragging the window by clicking anywhere */
        -webkit-app-region: drag;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .value-display {
        font-size: 48px;
        font-weight: 600;
        color: #ffffff;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
      }

      /* Optional: Add a subtle animation when the value updates */
      .value-display.update {
        transform: scale(1.1);
        opacity: 0.8;
      }
    </style>
  </head>
  <body>
    <h1>Transparent Widget</h1>
    <div id="value" class="value-display">This is my transparent widget</div>

    <script>
      //   const widgetId = window.WIDGET_ID;
      //   let lastValue = null;

      //   async function fetchLatestValue() {
      //     try {
      //       const response = await fetch(
      //         `http://localhost:3111/widgets/${widgetId}/latest`
      //       );
      //       if (!response.ok) {
      //         throw new Error("Failed to fetch value");
      //       }

      //       const data = await response.json();
      //       const valueDisplay = document.getElementById("value");

      //       // Add update animation if value changed
      //       if (lastValue !== data.value) {
      //         valueDisplay.classList.add("update");
      //         setTimeout(() => valueDisplay.classList.remove("update"), 300);
      //         lastValue = data.value;
      //       }

      //       valueDisplay.textContent = data.value;
      //     } catch (error) {
      //       document.getElementById("value").textContent = "--";
      //     }
      //   }

      //   // Fetch immediately and then every 5 seconds
      //   fetchLatestValue();
      //   setInterval(fetchLatestValue, 5000);
    </script>
  </body>
</html>
